<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ØªØ³ØªØ± DNS Ø³Ø§Ø¯Ù‡</title>
  <style>
    body {
      font-family: sans-serif;
      background: #0f172a;
      color: #fff;
      text-align: center;
      padding: 20px;
    }
    h1 { color: #38bdf8; }
    button {
      background: #38bdf8;
      border: none;
      color: #fff;
      padding: 10px 20px;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
    }
    button:disabled { opacity: 0.5; }
    .result {
      margin-top: 20px;
      background: #1e293b;
      padding: 10px;
      border-radius: 10px;
    }
    .fastest {
      color: #22c55e;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>ğŸŒ ØªØ³Øª Ø³Ø±Ø¹Øª DNS</h1>
  <p>Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø¨Ø²Ù† ØªØ§ Ø³Ø±ÛŒØ¹â€ŒØªØ±ÛŒÙ† DNS Ø±Ùˆ Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒÙ…</p>
  <button id="startBtn">Ø´Ø±ÙˆØ¹ ØªØ³Øª</button>
  <div id="results" class="result"></div>

  <script>
    const dnsServers = [
      { name: "Google", ip: "8.8.8.8" },
      { name: "Cloudflare", ip: "1.1.1.1" },
      { name: "OpenDNS", ip: "208.67.222.222" },
      { name: "Quad9", ip: "9.9.9.9" },
    ];

    async function testDNS(server) {
      const start = performance.now();
      try {
        await fetch(`https://${server.ip}/dns-query`, { mode: "no-cors" });
      } catch (e) {
        // no-cors block expected; just measure time
      }
      const end = performance.now();
      return end - start;
    }

    document.getElementById("startBtn").onclick = async function () {
      this.disabled = true;
      document.getElementById("results").innerHTML = "Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª...";
      let results = [];
      for (const dns of dnsServers) {
        const time = await testDNS(dns);
        results.push({ ...dns, time });
      }
      results.sort((a, b) => a.time - b.time);

      let html = "<h3>Ù†ØªØ§ÛŒØ¬ ØªØ³Øª:</h3>";
      results.forEach((r, i) => {
        const cls = i === 0 ? "fastest" : "";
        html += `<p class="${cls}">${r.name} (${r.ip}): ${r.time.toFixed(1)} ms</p>`;
      });
      document.getElementById("results").innerHTML = html;
      this.disabled = false;
    };
  </script>
</body>
</html>